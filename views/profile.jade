extends layout

block scripts
  script(src="/js/profile.js")
  if user.items.length > 0
    script.
      var items = !{JSON.stringify(user.items)}
  else
    script.
      var items = []

if user
  .alert.alert-success.animated.flipInX
    i.fa.fa-check
    strong Success!
    |  You are logged in.

block content

  input(type='hidden' name='_csrf' id='csrf' value=token)

  div(data-ng-controller="ProductsController")
    .row
      .col-md-6
        .panel.panel-default

          .panel-heading: h3.panel-title My Watched Items
          .panel-body
            ul.no-list-style
              li
                form#new-item(role="form" data-ng-submit="submitNewItem()")
                  div(style="float: left;")
                    input.form-control(type="text" id="additem")
                  div(style="float: left;")
                    button.btn.btn-default add
                  .clearfix
              li(data-ng-repeat="item in myitems")
                input(type="checkbox" value="{{ item._id }}")
                | {{ " " + item.name }}


      .col-md-6
        .panel.panel-default

          .panel-heading: h2.panel-title My Location
          .panel-body
            input.form-control(type="text" id="location" placeholder="Calgary, AB")

        .panel.panel-default

          .panel-heading: h2.panel-title My Grocery Stores
          .panel-body
            .checkbox
              input(type="checkbox" value="store_safeway" id="store_safeway")
              label(for="store_safeway") Safeway
            .checkbox
              input(type="checkbox" value="store_coop" id="store_coop")
              label(for="store_coop") Calgary Co-Op
            .checkbox
              input(type="checkbox" value="store_superstore" id="store_superstore")
              label(for="store_superstore") Superstore

            div
              a(href="#") Remove Checked

  .modal#list-add
    .modal-dialog
      .modal-content
        .modal-header
          button.close(type="button" data-dismiss="modal" aria-hidden="true")&times;
          h4.modal-title Modal title
        .modal-body
          label(for="product_search") Start typing the name of something you buy regularly.
          .form-group
            input(type="search" id="product_search" data-ng-model="filter.product_search.name")

            div(data-ng-controller="ProductsController")
              ul.no-list-style
                li(data-ng-repeat="product in products | filter:filter.product_search")
                  button.btn.btn-default:  span.glyphicon.glyphicon-plus.middle
                  span(style="vertical-align: middle") {{ " " + product.name }}

        .modal-footer
          button.btn.btn-default(type="button" data-dismiss="modal") Close